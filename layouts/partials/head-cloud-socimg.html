{{- $fallbackImg := resources.Get "/images/typewriter-monochrome_2242164_6260x4374.jpg" -}}
{{- $fallbackImg = $fallbackImg.Fit "1280x669" -}}
{{- $socImg := "" -}}{{- /* init */ -}}
	{{- if .IsHome }}
		{{- $socImg = $fallbackImg.Permalink -}}{{/* fallback if not Home */}}
	{{- else }}
		{{- $escapedTitle := .Title -}}
		{{/*
			Cloudinary requires “double-escaping” (meaning, escaping the `%` within as `%25`) the following characters as follows:
			- Percent sign %2525 (not just %25)
			- Comma %252C (not just %2C)
			- Forward slash %252F (not just %2F)
			- Emoji character (not worrying about that one!)
		*/}}
		{{- $escapedTitle = strings.Replace $escapedTitle "%" "%2525" -}}{{/* percent sign */}}
			{{/* **MUST** put that one at the top to avoid fouling up the rest!! */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "," "%252C" -}}{{/* comma */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "/" "%252F" -}}{{/* forward slash*/}}
		{{- $escapedTitle = strings.Replace $escapedTitle " " "%20" -}}{{/* regular space */}}
		{{- $escapedTitle = strings.Replace $escapedTitle ":" "%3A" -}}{{/* colon */}}
		{{- $escapedTitle = strings.Replace $escapedTitle ";" "%3B" -}}{{/* semicolon */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "!" "%21" -}}{{/* exclamation point */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "?" "%3F" -}}{{/* question mark */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "+" "%2B" -}}{{/* plus sign */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "—" "%E2%80%94" -}}{{/* em dash */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "–" "%E2%80%93" -}}{{/* en dash */}}
		{{- $escapedTitle = strings.Replace $escapedTitle " " "%C2%A0" -}}{{/* nbsp */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "•" "%E2%80%A2" -}}{{/* bullet */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "#" "%23" -}}{{/* number sign or hash */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "(" "%28" -}}{{/* opening parenthesis */}}
		{{- $escapedTitle = strings.Replace $escapedTitle ")" "%29" -}}{{/* closing parenthesis */}}
		{{- $escapedTitle = strings.Replace $escapedTitle '"' "%22" -}}{{/* straight-up quote character */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "“" "%E2%80%9C" -}}{{/* opening curly double quote character */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "”" "%E2%80%9D" -}}{{/* closing curly double quote character */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "'" "%27" -}}{{- /* straight-up apostrophe or single quote character */ -}}
		{{- $escapedTitle = strings.Replace $escapedTitle "‘" "%E2%80%98" -}}{{/* opening curly single quote character */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "’" "%E2%80%99" -}}{{/* curly apostrophe - closing curly single quote character */}}
		{{- $escapedTitle = strings.Replace $escapedTitle "‑" "%E2%80%91" -}}{{/* non-breaking hyphen */}}
		{{- $titleSize := 96 -}}{{/* pixels */}}
		{{- if compare.Gt (len $.Title) 36 -}}
			{{- $titleSize = 72 -}}
		{{- end -}}
		{{- $fontChoice := "librefranklinsemibold.ttf" -}}
		{{- /* choices are `librefranklinsemibold.ttf` and `librefranklinmedium.ttf` */ -}}
		{{- $titleWidth := 1136 -}}{{/* 72 each side from 1280 */}}
		{{- $socImg = fmt.Print "https://res.cloudinary.com/brycewray-com/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_" $titleWidth ",c_fit,co_rgb:ffffff,g_north,y_72,l_text:" $fontChoice "_" $titleSize "_center:" $escapedTitle "/social-OG-bkgd-w-BW-logo-ctrd-for-1280x669" -}}
	{{- end }}
		<meta property="og:image" content="{{ $socImg }}">
		<meta property="og:image:width" content="1280">
		<meta property="og:image:width" content="669">
		<meta property="twitter:image" content="{{ $socImg }}">
		<meta property="twitter:card" content="summary_large_image">
