{{- $cloudiBase := "https://res.cloudinary.com/brycewray-com/image/upload/" -}}
{{- $imgToGet := "" -}}
{{- $imgRsc := "" -}}
{{- $width := "" -}}
{{- $height := "" -}}

{{- with .Params.imgs }}
	<style media="screen">
	{{- range . -}}
		{{- $src := . -}}
		{{- $rscToMatch := fmt.Print "images/" $src -}}
		{{- $imgBd5 := crypto.MD5 . -}}
		{{- if resources.GetMatch $rscToMatch -}}
			{{- $imgRsc := resources.GetMatch $rscToMatch -}}
			{{- $BkgdStyleEnd := fmt.Print "; background-size: cover; background-repeat: no-repeat; aspect-ratio: " $imgRsc.Width " / " $imgRsc.Height ";" -}}
			{{- $GIP_colors := $imgRsc.Colors -}}
			{{- if (lt ($GIP_colors | len) 2) -}}
				{{- $GIP_colors = $GIP_colors | collections.Append "#000000" -}}
			{{- end -}}
			{{- $GIP_bkgd := collections.Delimit ($GIP_colors) ", " -}}
			{{- $BkgdStyleGIP := fmt.Print "background: linear-gradient(" $GIP_bkgd ")" $BkgdStyleEnd }}
			.imgB-{{ $imgBd5 }}-GIP {
				{{ $BkgdStyleGIP | safe.CSS }}
			}
			{{- $LQIP_img := $imgRsc.Process "resize 20x jpg q20" -}}
			{{- $LQIP_b64 := $LQIP_img.Content | encoding.Base64Encode -}}
			{{- $BkgdStyleLQIP := fmt.Print "background: url(data:image/jpeg;base64," $LQIP_b64 ")" $BkgdStyleEnd }}
			.imgB-{{ $imgBd5 }}-LQIP {
				{{ $BkgdStyleLQIP | safe.CSS }}
			}
		{{- end }}
	{{- end }}
	</style>
{{- end }}
