{{- $URLopen := "https://fonts.googleapis.com/css2?family=" -}}
{{- $fontSans := "Libre+Franklin" -}}
	{{- $lowWeightSans := 100 -}}
	{{- $topWeightSans := 900 -}}
	{{- $weightIntroSans := ":ital,wght@" -}}
	{{- $optFirstSans := "0," -}}
	{{- $optSecondSans := "1," -}}
	{{- $URLSans := print $URLopen $fontSans $weightIntroSans $optFirstSans $lowWeightSans ".." $topWeightSans ";" $optSecondSans $lowWeightSans ".." $topWeightSans "&display=swap" -}}
{{- $fontSerif := "" -}}
	{{- $lowWeightSerif := 100 -}}
	{{- $topWeightSerif := 900 -}}
	{{- $weightIntroSerif := ":ital,wght@" -}}
	{{- $optFirstSerif := "0," -}}
	{{- $optSecondSerif := "1," -}}
	{{- $URLSerif := print $URLopen $fontSerif $weightIntroSerif $optFirstSerif $lowWeightSerif ".." $topWeightSerif ";" $optSecondSerif $lowWeightSerif ".." $topWeightSerif "&display=swap" -}}
{{- $fontMono := "" -}}
	{{- $lowWeightMono := 400 -}}
	{{- $topWeightMono := 700 -}}
	{{- $weightIntroMono := ":ital,wght@" -}}
	{{- $optFirstMono := "0," -}}
	{{- $optSecondMono := "1," -}}
	{{- $URLMono := print $URLopen $fontMono $weightIntroMono $optFirstMono $lowWeightMono ".." $topWeightMono ";" $optSecondMono $lowWeightMono ".." $topWeightMono "&display=swap" -}}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
{{/* https://discourse.gohugo.io/t/how-to-unescape-plus-sign-in-url-re-cloudflare-fonts/46734 */}}
{{ with $fontSans -}}
	<link {{ printf "href=%q" $URLSans | safeHTMLAttr }} rel="stylesheet">
{{- end }}
{{ with $fontSerif -}}
	<link {{ printf "href=%q" $URLSerif | safeHTMLAttr }} rel="stylesheet">
{{- end }}
{{- with $fontMono -}}
	<link {{ printf "href=%q" $URLMono | safeHTMLAttr }} rel="stylesheet">
{{- end }}

{{- $css := resources.Get "css/critical.css" | postCSS }}
{{- with $css }}
	<style media="screen">{{ .Content | safeCSS }}</style>
{{- end }}
